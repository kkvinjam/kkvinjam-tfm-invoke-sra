{
  "version": 4,
  "terraform_version": "1.5.7",
  "serial": 388,
  "lineage": "b723112f-7cec-5f2b-45bd-38b238a6c1f9",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "838265863270",
            "arn": "arn:aws:sts::838265863270:assumed-role/Admin/vinjak-Isengard",
            "id": "838265863270",
            "user_id": "AROA4GLEJ7RTH73FIVJOJ:vinjak-Isengard"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "US East (Ohio)",
            "endpoint": "ec2.us-east-2.amazonaws.com",
            "id": "us-east-2",
            "name": "us-east-2"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "838265863270",
            "arn": "arn:aws:sts::838265863270:assumed-role/Admin/vinjak-Isengard",
            "id": "838265863270",
            "user_id": "AROA4GLEJ7RTH73FIVJOJ:vinjak-Isengard"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "data",
      "type": "aws_ssm_parameter",
      "name": "audit_account_id",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:us-east-2:838265863270:parameter/sra/control-tower/audit-account-id",
            "id": "/sra/control-tower/audit-account-id",
            "insecure_value": "138941876282",
            "name": "/sra/control-tower/audit-account-id",
            "type": "String",
            "value": "138941876282",
            "version": 2,
            "with_decryption": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "data",
      "type": "aws_ssm_parameter",
      "name": "customer_control_tower_regions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:us-east-2:838265863270:parameter/sra/regions/customer-control-tower-regions",
            "id": "/sra/regions/customer-control-tower-regions",
            "insecure_value": "us-east-1,us-east-2",
            "name": "/sra/regions/customer-control-tower-regions",
            "type": "StringList",
            "value": "us-east-1,us-east-2",
            "version": 2,
            "with_decryption": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "data",
      "type": "aws_ssm_parameter",
      "name": "customer_control_tower_regions_without_home_region",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:us-east-2:838265863270:parameter/sra/regions/customer-control-tower-regions-without-home-region",
            "id": "/sra/regions/customer-control-tower-regions-without-home-region",
            "insecure_value": "us-east-1",
            "name": "/sra/regions/customer-control-tower-regions-without-home-region",
            "type": "StringList",
            "value": "us-east-1",
            "version": 2,
            "with_decryption": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "data",
      "type": "aws_ssm_parameter",
      "name": "enabled_regions",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:us-east-2:838265863270:parameter/sra/regions/enabled-regions",
            "id": "/sra/regions/enabled-regions",
            "insecure_value": "eu-central-1,ap-northeast-1,sa-east-1,ap-southeast-1,us-east-1,us-east-2,ca-central-1,us-west-2,us-west-1,ap-northeast-3,ap-northeast-2,ap-south-1,eu-west-2,eu-north-1,eu-west-1,ap-southeast-2,eu-west-3",
            "name": "/sra/regions/enabled-regions",
            "type": "StringList",
            "value": "eu-central-1,ap-northeast-1,sa-east-1,ap-southeast-1,us-east-1,us-east-2,ca-central-1,us-west-2,us-west-1,ap-northeast-3,ap-northeast-2,ap-south-1,eu-west-2,eu-north-1,eu-west-1,ap-southeast-2,eu-west-3",
            "version": 2,
            "with_decryption": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "data",
      "type": "aws_ssm_parameter",
      "name": "enabled_regions_without_home_region",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:us-east-2:838265863270:parameter/sra/regions/enabled-regions-without-home-region",
            "id": "/sra/regions/enabled-regions-without-home-region",
            "insecure_value": "eu-central-1,ap-northeast-1,sa-east-1,ap-southeast-1,us-east-1,ca-central-1,us-west-2,us-west-1,ap-northeast-3,ap-northeast-2,ap-south-1,eu-west-2,eu-north-1,eu-west-1,ap-southeast-2,eu-west-3",
            "name": "/sra/regions/enabled-regions-without-home-region",
            "type": "StringList",
            "value": "eu-central-1,ap-northeast-1,sa-east-1,ap-southeast-1,us-east-1,ca-central-1,us-west-2,us-west-1,ap-northeast-3,ap-northeast-2,ap-south-1,eu-west-2,eu-north-1,eu-west-1,ap-southeast-2,eu-west-3",
            "version": 2,
            "with_decryption": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "data",
      "type": "aws_ssm_parameter",
      "name": "home_region",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:us-east-2:838265863270:parameter/sra/control-tower/home-region",
            "id": "/sra/control-tower/home-region",
            "insecure_value": "us-east-2",
            "name": "/sra/control-tower/home-region",
            "type": "String",
            "value": "us-east-2",
            "version": 2,
            "with_decryption": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "data",
      "type": "aws_ssm_parameter",
      "name": "log_archive_account_id",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:us-east-2:838265863270:parameter/sra/control-tower/log-archive-account-id",
            "id": "/sra/control-tower/log-archive-account-id",
            "insecure_value": "234971855308",
            "name": "/sra/control-tower/log-archive-account-id",
            "type": "String",
            "value": "234971855308",
            "version": 2,
            "with_decryption": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "data",
      "type": "aws_ssm_parameter",
      "name": "management_account_id",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:us-east-2:838265863270:parameter/sra/control-tower/management-account-id",
            "id": "/sra/control-tower/management-account-id",
            "insecure_value": "838265863270",
            "name": "/sra/control-tower/management-account-id",
            "type": "String",
            "value": "838265863270",
            "version": 2,
            "with_decryption": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "data",
      "type": "aws_ssm_parameter",
      "name": "organization_id",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:us-east-2:838265863270:parameter/sra/control-tower/organization-id",
            "id": "/sra/control-tower/organization-id",
            "insecure_value": "o-4ngkm7vxuw",
            "name": "/sra/control-tower/organization-id",
            "type": "String",
            "value": "o-4ngkm7vxuw",
            "version": 2,
            "with_decryption": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "data",
      "type": "aws_ssm_parameter",
      "name": "root_organizational_unit_id",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:us-east-2:838265863270:parameter/sra/control-tower/root-organizational-unit-id",
            "id": "/sra/control-tower/root-organizational-unit-id",
            "insecure_value": "r-v1ex",
            "name": "/sra/control-tower/root-organizational-unit-id",
            "type": "String",
            "value": "r-v1ex",
            "version": 2,
            "with_decryption": true
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "managed",
      "type": "aws_cloudformation_stack_set",
      "name": "sra_execution_role_stackset",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "administration_role_arn": "",
            "arn": "arn:aws:cloudformation:us-east-2:838265863270:stackset/sra-stackset-execution-role:413a1663-6341-4189-a5f8-89b432ae902d",
            "auto_deployment": [
              {
                "enabled": true,
                "retain_stacks_on_account_removal": false
              }
            ],
            "call_as": "SELF",
            "capabilities": [
              "CAPABILITY_NAMED_IAM"
            ],
            "description": "SRA execution role stackset",
            "execution_role_name": "",
            "id": "sra-stackset-execution-role",
            "managed_execution": [
              {
                "active": true
              }
            ],
            "name": "sra-stackset-execution-role",
            "operation_preferences": [
              {
                "failure_tolerance_count": 0,
                "failure_tolerance_percentage": 100,
                "max_concurrent_count": 0,
                "max_concurrent_percentage": 100,
                "region_concurrency_type": "PARALLEL",
                "region_order": null
              }
            ],
            "parameters": {
              "pManagementAccountId": "838265863270",
              "pSRAExecutionRoleName": "sra-execution",
              "pSRASolutionName": "sra-create-deployment-roles"
            },
            "permission_model": "SERVICE_MANAGED",
            "stack_set_id": "sra-stackset-execution-role:413a1663-6341-4189-a5f8-89b432ae902d",
            "tags": null,
            "tags_all": {},
            "template_body": "AWSTemplateFormatVersion: 2010-09-09\nDescription: SRA Terraform Edition Execution IAM Role Creation template (sra-1u3sd7f8f).\nMetadata:\n  SRA:\n    Version: 1.0\n  AWS::CloudFormation::Interface:\n    ParameterGroups:\n    - Label:\n        default: General Properties\n      Parameters:\n          - pSRASolutionName\n          - pManagementAccountId\n    - Label:\n        default: Role Attributes\n      Parameters:\n          - pSRAExecutionRoleName\n    ParameterLabels:\n      pSRAExecutionRoleName:\n        default: SRA Execution Role Name\n      pSRASolutionName:\n        default: SRA Solution Name\n      pManagementAccountId:\n        default: Management Account Id\n\nParameters:\n  pSRAExecutionRoleName:\n    AllowedValues: [sra-execution]\n    Default: sra-execution\n    Description: SRA execution role name\n    Type: String\n  pSRASolutionName:\n    AllowedValues: [sra-create-deployment-roles]\n    Default: sra-create-deployment-roles\n    Description: The SRA solution name. The default value is the folder name of the solution\n    Type: String\n  pManagementAccountId:\n    AllowedPattern: '^\\d{12}$'\n    Default: 333333333333\n    ConstraintDescription: Must be 12 digits.\n    Description: AWS Account ID of the Management account.\n    Type: String\n\nResources:\n  rSRAExecutionRole:\n    DeletionPolicy: Delete\n    UpdateReplacePolicy: Delete\n    Type: AWS::IAM::Role\n    Metadata:\n      cfn_nag:\n        rules_to_suppress:\n          - id: W28\n            reason: Specific role name provided\n          - id: W43\n            reason: Administrator policy is required for the role\n    Properties:\n      RoleName: !Ref pSRAExecutionRoleName\n      AssumeRolePolicyDocument:\n          Version: 2012-10-17\n          Statement:\n          - Action: sts:AssumeRole\n            Effect: Allow\n            Principal:\n              AWS:\n                - !Sub arn:${AWS::Partition}:iam::${pManagementAccountId}:root\n      ManagedPolicyArns:\n        - !Sub arn:${AWS::Partition}:iam::aws:policy/AdministratorAccess\n      Tags:\n        - Key: sra-solution\n          Value: !Ref pSRASolutionName\n",
            "template_url": null,
            "timeouts": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "parameters"
              },
              {
                "type": "index",
                "value": {
                  "value": "pManagementAccountId",
                  "type": "string"
                }
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsidXBkYXRlIjoxODAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.my_module.data.aws_ssm_parameter.management_account_id",
            "module.my_module.module.mangement_account_parameters.aws_cloudwatch_log_group.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_iam_role.management_account_parameters_lambda_role",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.cloudwatch_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.management_account_parameters_lambda_ssm_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_lambda_function.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_lambda_invocation.lambda_invoke",
            "module.my_module.module.mangement_account_parameters.data.archive_file.hash_check",
            "module.my_module.module.mangement_account_parameters.data.archive_file.zipped_lambda",
            "module.my_module.module.mangement_account_parameters.data.aws_caller_identity.current",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.assume_role",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.cloudwatch_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.management_account_parameters_lambda_ssm_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_partition.current",
            "module.my_module.module.mangement_account_parameters.data.aws_region.current",
            "module.my_module.module.mangement_account_parameters.null_resource.package_lambda"
          ]
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "managed",
      "type": "aws_cloudformation_stack_set_instance",
      "name": "sra_execution_role_stackset_instance",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": null,
            "call_as": "SELF",
            "deployment_targets": [
              {
                "account_filter_type": "",
                "accounts": null,
                "accounts_url": "",
                "organizational_unit_ids": [
                  "r-v1ex"
                ]
              }
            ],
            "id": "sra-stackset-execution-role,r-v1ex,us-east-2",
            "operation_preferences": [],
            "organizational_unit_id": null,
            "parameter_overrides": null,
            "region": "us-east-2",
            "retain_stack": false,
            "stack_id": null,
            "stack_instance_summaries": [
              {
                "account_id": "138941876282",
                "organizational_unit_id": "r-v1ex",
                "stack_id": "arn:aws:cloudformation:us-east-2:138941876282:stack/StackSet-sra-stackset-execution-role-a722eb3f-2126-4a17-8712-e80cb2fd078a/12e41d00-5050-11ef-a87c-0641c41c440b"
              },
              {
                "account_id": "234971855308",
                "organizational_unit_id": "r-v1ex",
                "stack_id": "arn:aws:cloudformation:us-east-2:234971855308:stack/StackSet-sra-stackset-execution-role-edecfc94-39a7-4bec-9b21-e2e6ea261490/05ad8b80-5050-11ef-9b19-02c99710026b"
              }
            ],
            "stack_set_name": "sra-stackset-execution-role",
            "timeouts": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "deployment_targets"
              },
              {
                "type": "index",
                "value": {
                  "value": 0,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "organizational_unit_ids"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "region"
              }
            ]
          ],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.my_module.aws_cloudformation_stack_set.sra_execution_role_stackset",
            "module.my_module.data.aws_ssm_parameter.home_region",
            "module.my_module.data.aws_ssm_parameter.management_account_id",
            "module.my_module.data.aws_ssm_parameter.root_organizational_unit_id",
            "module.my_module.module.mangement_account_parameters.aws_cloudwatch_log_group.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_iam_role.management_account_parameters_lambda_role",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.cloudwatch_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.management_account_parameters_lambda_ssm_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_lambda_function.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_lambda_invocation.lambda_invoke",
            "module.my_module.module.mangement_account_parameters.data.archive_file.hash_check",
            "module.my_module.module.mangement_account_parameters.data.archive_file.zipped_lambda",
            "module.my_module.module.mangement_account_parameters.data.aws_caller_identity.current",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.assume_role",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.cloudwatch_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.management_account_parameters_lambda_ssm_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_partition.current",
            "module.my_module.module.mangement_account_parameters.data.aws_region.current",
            "module.my_module.module.mangement_account_parameters.null_resource.package_lambda"
          ]
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "managed",
      "type": "local_file",
      "name": "backend_file_creation",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "########################################################################\n# Main Configuration\n########################################################################\nbucket         = \"sra-tfstate-files-us-east-2-838265863270\"\nkey            = \"state/sra_state.tfstate\"\nregion         = \"us-east-2\"\nencrypt        = true\ndynamodb_table = \"sra-tfstate-lock\"\n",
            "content_base64": null,
            "content_base64sha256": "6VFCFDrLVNNhDvcD9CLgkaysGixZgbplYEIc2f3bjmI=",
            "content_base64sha512": "4HsPqAp/P0kWWy6XhZbshSiUKpelS88oSSroXRRlBxFjmobmiz/66FTudKiRMNnQ61ZZzp+y3VQahmGwn6E+Cg==",
            "content_md5": "b8c45eba12171a16cffc50badd14b902",
            "content_sha1": "de8013d20fb8e5c291ba33f44679e7ea08dd1011",
            "content_sha256": "e95142143acb54d3610ef703f422e091acac1a2c5981ba6560421cd9fddb8e62",
            "content_sha512": "e07b0fa80a7f3f49165b2e978596ec8528942a97a54bcf28492ae85d14650711639a86e68b3ffae854ee74a89130d9d0eb5659ce9fb2dd541a8661b09fa13e0a",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "./modules/aws-security-reference-architecture-examples/aws_sra_examples/terraform/common/../solutions/backend.tfvars",
            "id": "de8013d20fb8e5c291ba33f44679e7ea08dd1011",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "content"
              }
            ]
          ],
          "dependencies": [
            "module.my_module.data.aws_ssm_parameter.home_region",
            "module.my_module.module.dynamo_tf_lock.aws_dynamodb_table.terraform_locks",
            "module.my_module.module.mangement_account_parameters.aws_cloudwatch_log_group.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_iam_role.management_account_parameters_lambda_role",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.cloudwatch_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.management_account_parameters_lambda_ssm_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_lambda_function.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_lambda_invocation.lambda_invoke",
            "module.my_module.module.mangement_account_parameters.data.archive_file.hash_check",
            "module.my_module.module.mangement_account_parameters.data.archive_file.zipped_lambda",
            "module.my_module.module.mangement_account_parameters.data.aws_caller_identity.current",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.assume_role",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.cloudwatch_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.management_account_parameters_lambda_ssm_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_partition.current",
            "module.my_module.module.mangement_account_parameters.data.aws_region.current",
            "module.my_module.module.mangement_account_parameters.null_resource.package_lambda",
            "module.my_module.module.s3_state_bucket.aws_s3_bucket.sra_state_bucket",
            "module.my_module.module.s3_state_bucket.data.aws_caller_identity.current",
            "module.my_module.module.s3_state_bucket.data.aws_region.current"
          ]
        }
      ]
    },
    {
      "module": "module.my_module",
      "mode": "managed",
      "type": "local_file",
      "name": "config_file_creation",
      "provider": "provider[\"registry.terraform.io/hashicorp/local\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "content": "########################################################################\n# Main Configuration\n########################################################################\naudit_account_id                                   = \"138941876282\"\nhome_region                                        = \"us-east-2\"\nlog_archive_account_id                             = \"234971855308\"\nmanagement_account_id                              = \"838265863270\"\norganization_id                                    = \"o-4ngkm7vxuw\"\nroot_organizational_unit_id                        = \"r-v1ex\"\ncustomer_control_tower_regions                     = \"us-east-1,us-east-2\"\ncustomer_control_tower_regions_without_home_region = \"us-east-1\"\nenabled_regions                                    = \"\"\nenabled_regions_without_home_region                = \"\"\n\n########################################################################\n# Services to enable/disable\n########################################################################\nenable_gd                  = false\nenable_sh                  = false\nenable_access_analyzer     = false\nenable_macie               = false\nenable_cloudtrail_org      = false\nenable_iam_password_policy = false\nenable_inspector           = false\n    \n########################################################################\n# Guard Duty Settings\n########################################################################\ndisable_guard_duty                   = false\nenable_s3_logs                       = true\nenable_kubernetes_audit_logs         = true\nenable_malware_protection            = true\nenable_rds_login_events              = true\nenable_runtime_monitoring            = true\nenable_ecs_fargate_agent_management  = true\nenable_ec2_agent_management          = true\nenable_eks_addon_management          = true\nenable_lambda_network_logs           = true\nguardduty_control_tower_regions_only = true\nfinding_publishing_frequency         = \"FIFTEEN_MINUTES\"\n\n########################################################################\n# Security Hub Settings\n########################################################################\ndisable_security_hub                     = false\ncis_standard_version                     = \"1.4.0\"\ncompliance_frequency                     = \"7\"\nsecurityhub_control_tower_regions_only   = true\nenable_cis_standard                      = false\nenable_pci_standard                      = false\nenable_nist_standard                     = false\nenable_security_best_practices_standard  = true\npci_standard_version                     = \"3.2.1\"\nnist_standard_version                    = \"5.0.0\"\nsecurity_best_practices_standard_version = \"1.0.0\"\n\n########################################################################\n# Inspector Settings\n########################################################################\ndisable_inspector                    = false # set true BEFORE destroy\necr_rescan_duration                  = \"LIFETIME\"\nscan_components                      = \"EC2,ECR,LAMBDA,LAMBDA_CODE\"\ninspector_control_tower_regions_only = true\n\n########################################################################\n# IAM Password Policy\n########################################################################\niam_password_policy_allow_users_to_change_password = true\niam_password_policy_hard_expiry                    = false\niam_password_policy_max_password_age               = 90\niam_password_policy_minimum_password_length        = 14\niam_password_policy_password_reuse_prevention      = 24\niam_password_policy_require_lowercase_characters   = true\niam_password_policy_require_numbers                = true\niam_password_policy_require_symbols                = true\niam_password_policy_require_uppercase_characters   = true\n    \n########################################################################\n# Macie Settings\n########################################################################\ndisable_macie                      = false\nmacie_finding_publishing_frequency = \"FIFTEEN_MINUTES\"\n\n########################################################################\n# CloudTrail Settings\n########################################################################\nenable_data_events_only   = true\nenable_lambda_data_events = true\nenable_s3_data_events     = true\ndisable_cloudtrail        = false\n",
            "content_base64": null,
            "content_base64sha256": "NGYdu9fVvfuPLqhZNSit8/JkhXi/TFPvtO3OMxeouGM=",
            "content_base64sha512": "h5U+7B4t2W6StrdzQV/DwSlvDHzRplWu/XUCWO31R5dE1eLElhI8zOoL/A7jrZLNnKVsjvT9WcOqTFC0XePAXw==",
            "content_md5": "73a8e4f4dac13974c055e8a49e7a8dd8",
            "content_sha1": "69fd34e2de381cc8c9ff1159876a35ca5d7e05f7",
            "content_sha256": "34661dbbd7d5bdfb8f2ea8593528adf3f2648578bf4c53efb4edce3317a8b863",
            "content_sha512": "87953eec1e2dd96e92b6b773415fc3c1296f0c7cd1a655aefd750258edf5479744d5e2c496123cccea0bfc0ee3ad92cd9ca56c8ef4fd59c3aa4c50b45de3c05f",
            "directory_permission": "0777",
            "file_permission": "0777",
            "filename": "./modules/aws-security-reference-architecture-examples/aws_sra_examples/terraform/common/../solutions/config.tfvars",
            "id": "69fd34e2de381cc8c9ff1159876a35ca5d7e05f7",
            "sensitive_content": null,
            "source": null
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "content"
              }
            ]
          ],
          "dependencies": [
            "module.my_module.data.aws_ssm_parameter.audit_account_id",
            "module.my_module.data.aws_ssm_parameter.customer_control_tower_regions",
            "module.my_module.data.aws_ssm_parameter.customer_control_tower_regions_without_home_region",
            "module.my_module.data.aws_ssm_parameter.home_region",
            "module.my_module.data.aws_ssm_parameter.log_archive_account_id",
            "module.my_module.data.aws_ssm_parameter.management_account_id",
            "module.my_module.data.aws_ssm_parameter.organization_id",
            "module.my_module.data.aws_ssm_parameter.root_organizational_unit_id",
            "module.my_module.module.mangement_account_parameters.aws_cloudwatch_log_group.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_iam_role.management_account_parameters_lambda_role",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.cloudwatch_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.management_account_parameters_lambda_ssm_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_lambda_function.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_lambda_invocation.lambda_invoke",
            "module.my_module.module.mangement_account_parameters.data.archive_file.hash_check",
            "module.my_module.module.mangement_account_parameters.data.archive_file.zipped_lambda",
            "module.my_module.module.mangement_account_parameters.data.aws_caller_identity.current",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.assume_role",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.cloudwatch_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.management_account_parameters_lambda_ssm_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_partition.current",
            "module.my_module.module.mangement_account_parameters.data.aws_region.current",
            "module.my_module.module.mangement_account_parameters.null_resource.package_lambda"
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.dynamo_tf_lock",
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "terraform_locks",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-2:838265863270:table/sra-tfstate-lock",
            "attribute": [
              {
                "name": "LockID",
                "type": "S"
              }
            ],
            "billing_mode": "PAY_PER_REQUEST",
            "deletion_protection_enabled": false,
            "global_secondary_index": [],
            "hash_key": "LockID",
            "id": "sra-tfstate-lock",
            "import_table": [],
            "local_secondary_index": [],
            "name": "sra-tfstate-lock",
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": null,
            "read_capacity": 0,
            "replica": [],
            "restore_date_time": null,
            "restore_source_name": null,
            "restore_to_latest_time": null,
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "table_class": "STANDARD",
            "tags": null,
            "tags_all": {},
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 0
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    },
    {
      "module": "module.my_module.module.mangement_account_parameters",
      "mode": "data",
      "type": "archive_file",
      "name": "hash_check",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": [
              "lambda_function.zip, data.zip"
            ],
            "id": "9af59ef2f4bcbf55dee6225e63db0a43fddb272c",
            "output_base64sha256": "CZq5swZjbuXSg8L6zPyYnlowlSnhCHXrK2oHr85ej+A=",
            "output_base64sha512": "3s6YUgaOiFYghgAjSLD+8NUB9qmVFEHCy0liUC/ah4BijlsEjBXTZ71wBjbgqw38wh/sbt3e0WPtEVDgoPbhfw==",
            "output_file_mode": null,
            "output_md5": "80d6d7e592ef252ff77e0bb1132129dd",
            "output_path": "modules/aws-security-reference-architecture-examples/aws_sra_examples/terraform/common/ssm_parameters/lambda/lambda_function.zip",
            "output_sha": "9af59ef2f4bcbf55dee6225e63db0a43fddb272c",
            "output_sha256": "099ab9b306636ee5d283c2faccfc989e5a309529e10875eb2b6a07afce5e8fe0",
            "output_sha512": "dece9852068e88562086002348b0fef0d501f6a9951441c2cb4962502fda8780628e5b048c15d367bd700636e0ab0dfcc21fec6eddded163ed1150e0a0f6e17f",
            "output_size": 5673,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "./modules/aws-security-reference-architecture-examples/aws_sra_examples/terraform/common/../../solutions/common/common_prerequisites/lambda/src/",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.mangement_account_parameters",
      "mode": "data",
      "type": "archive_file",
      "name": "zipped_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": [
              "lambda_function.zip, data.zip"
            ],
            "id": "aac29896c0e6f81687455b986d469da2fe3b55a6",
            "output_base64sha256": "RRwemzhT/m9fdm9Kw01BqyGAdDF8phqLPdJd6WKU+MM=",
            "output_base64sha512": "k08YeDvCfTOR3aPiuC2wtWqotphibWvygeLuwgbNCp12AeSRh39b7JwQA4NjHdeTLR6LJC6C8otdeUGngbf7xg==",
            "output_file_mode": null,
            "output_md5": "dd2a9884afaaca77c6c99821cfce790f",
            "output_path": "modules/aws-security-reference-architecture-examples/aws_sra_examples/terraform/common/ssm_parameters/lambda/lambda_function.zip",
            "output_sha": "aac29896c0e6f81687455b986d469da2fe3b55a6",
            "output_sha256": "451c1e9b3853fe6f5f766f4ac34d41ab218074317ca61a8b3dd25de96294f8c3",
            "output_sha512": "934f18783bc27d3391dda3e2b82db0b56aa8b698626d6bf281e2eec206cd0a9d7601e491877f5bec9c100383631dd7932d1e8b242e82f28b5d7941a781b7fbc6",
            "output_size": 34835,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "modules/aws-security-reference-architecture-examples/aws_sra_examples/terraform/common/ssm_parameters/lambda/package",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.mangement_account_parameters",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "838265863270",
            "arn": "arn:aws:sts::838265863270:assumed-role/Admin/vinjak-Isengard",
            "id": "838265863270",
            "user_id": "AROA4GLEJ7RTH73FIVJOJ:vinjak-Isengard"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.mangement_account_parameters",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "assume_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2690255455",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Action\":\"sts:AssumeRole\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "sts:AssumeRole"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "lambda.amazonaws.com"
                    ],
                    "type": "Service"
                  }
                ],
                "resources": [],
                "sid": ""
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.mangement_account_parameters",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "cloudwatch_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "997875085",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"CloudWatchLogs\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:us-east-2:838265863270:log-group:/aws/lambda/sra-management-account-parameters:log-stream:*\"\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"CloudWatchLogs\",\"Effect\":\"Allow\",\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Resource\":\"arn:aws:logs:us-east-2:838265863270:log-group:/aws/lambda/sra-management-account-parameters:log-stream:*\"}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "logs:CreateLogGroup",
                  "logs:CreateLogStream",
                  "logs:PutLogEvents"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:logs:us-east-2:838265863270:log-group:/aws/lambda/sra-management-account-parameters:log-stream:*"
                ],
                "sid": "CloudWatchLogs"
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.mangement_account_parameters",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "management_account_parameters_lambda_ssm_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "2176368341",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"STSOrganizationRead\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"organizations:ListRoots\",\n        \"organizations:ListAccounts\",\n        \"organizations:DescribeOrganization\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"CloudFormationRead\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"cloudformation:ListStackInstances\",\n        \"cloudformation:DescribeStackSet\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"SSMParameterRead\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"ssm:DescribeParameters\",\n      \"Resource\": \"*\"\n    },\n    {\n      \"Sid\": \"SSMParameterReadValues\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"ssm:GetParameters\",\n      \"Resource\": \"arn:aws:ssm:*:838265863270:parameter/sra/*\"\n    },\n    {\n      \"Sid\": \"SSMParameterWrite\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ssm:PutParameter\",\n        \"ssm:DeleteParameters\",\n        \"ssm:AddTagsToResource\"\n      ],\n      \"Resource\": \"arn:aws:ssm:*:838265863270:parameter/sra/*\"\n    },\n    {\n      \"Sid\": \"TagsRead\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"tag:GetResources\",\n      \"Resource\": \"*\"\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"STSOrganizationRead\",\"Effect\":\"Allow\",\"Action\":[\"organizations:ListRoots\",\"organizations:ListAccounts\",\"organizations:DescribeOrganization\"],\"Resource\":\"*\"},{\"Sid\":\"CloudFormationRead\",\"Effect\":\"Allow\",\"Action\":[\"cloudformation:ListStackInstances\",\"cloudformation:DescribeStackSet\"],\"Resource\":\"*\"},{\"Sid\":\"SSMParameterRead\",\"Effect\":\"Allow\",\"Action\":\"ssm:DescribeParameters\",\"Resource\":\"*\"},{\"Sid\":\"SSMParameterReadValues\",\"Effect\":\"Allow\",\"Action\":\"ssm:GetParameters\",\"Resource\":\"arn:aws:ssm:*:838265863270:parameter/sra/*\"},{\"Sid\":\"SSMParameterWrite\",\"Effect\":\"Allow\",\"Action\":[\"ssm:PutParameter\",\"ssm:DeleteParameters\",\"ssm:AddTagsToResource\"],\"Resource\":\"arn:aws:ssm:*:838265863270:parameter/sra/*\"},{\"Sid\":\"TagsRead\",\"Effect\":\"Allow\",\"Action\":\"tag:GetResources\",\"Resource\":\"*\"}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "organizations:DescribeOrganization",
                  "organizations:ListAccounts",
                  "organizations:ListRoots"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": "STSOrganizationRead"
              },
              {
                "actions": [
                  "cloudformation:DescribeStackSet",
                  "cloudformation:ListStackInstances"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": "CloudFormationRead"
              },
              {
                "actions": [
                  "ssm:DescribeParameters"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": "SSMParameterRead"
              },
              {
                "actions": [
                  "ssm:GetParameters"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:ssm:*:838265863270:parameter/sra/*"
                ],
                "sid": "SSMParameterReadValues"
              },
              {
                "actions": [
                  "ssm:AddTagsToResource",
                  "ssm:DeleteParameters",
                  "ssm:PutParameter"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "arn:aws:ssm:*:838265863270:parameter/sra/*"
                ],
                "sid": "SSMParameterWrite"
              },
              {
                "actions": [
                  "tag:GetResources"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [],
                "resources": [
                  "*"
                ],
                "sid": "TagsRead"
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.mangement_account_parameters",
      "mode": "data",
      "type": "aws_partition",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "dns_suffix": "amazonaws.com",
            "id": "aws",
            "partition": "aws",
            "reverse_dns_prefix": "com.amazonaws"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.mangement_account_parameters",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "US East (Ohio)",
            "endpoint": "ec2.us-east-2.amazonaws.com",
            "id": "us-east-2",
            "name": "us-east-2"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.mangement_account_parameters",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "management_account_parameters_lambda_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::838265863270:role/sra-management-account-parameters-lambda",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2024-08-01T21:48:20Z",
            "description": "Role for 'sra-management-account-parameters-lambda' Lambda function",
            "force_detach_policies": false,
            "id": "sra-management-account-parameters-lambda",
            "inline_policy": [],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "sra-management-account-parameters-lambda",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "sra-solution": "sra-common-prerequisites"
            },
            "tags_all": {
              "sra-solution": "sra-common-prerequisites"
            },
            "unique_id": "AROA4GLEJ7RTLPQOIHLZF"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.assume_role"
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.mangement_account_parameters",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "cloudwatch_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "sra-management-account-parameters-lambda:CloudWatchLogGroup",
            "name": "CloudWatchLogGroup",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:PutLogEvents\",\"logs:CreateLogStream\",\"logs:CreateLogGroup\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:logs:us-east-2:838265863270:log-group:/aws/lambda/sra-management-account-parameters:log-stream:*\",\"Sid\":\"CloudWatchLogs\"}]}",
            "role": "sra-management-account-parameters-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.my_module.module.mangement_account_parameters.aws_iam_role.management_account_parameters_lambda_role",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.assume_role",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.cloudwatch_policy"
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.mangement_account_parameters",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "management_account_parameters_lambda_ssm_policy_attachment",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "sra-management-account-parameters-lambda:ssm-account-parameter-creator",
            "name": "ssm-account-parameter-creator",
            "name_prefix": "",
            "policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"organizations:ListRoots\",\"organizations:ListAccounts\",\"organizations:DescribeOrganization\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"STSOrganizationRead\"},{\"Action\":[\"cloudformation:ListStackInstances\",\"cloudformation:DescribeStackSet\"],\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"CloudFormationRead\"},{\"Action\":\"ssm:DescribeParameters\",\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"SSMParameterRead\"},{\"Action\":\"ssm:GetParameters\",\"Effect\":\"Allow\",\"Resource\":\"arn:aws:ssm:*:838265863270:parameter/sra/*\",\"Sid\":\"SSMParameterReadValues\"},{\"Action\":[\"ssm:PutParameter\",\"ssm:DeleteParameters\",\"ssm:AddTagsToResource\"],\"Effect\":\"Allow\",\"Resource\":\"arn:aws:ssm:*:838265863270:parameter/sra/*\",\"Sid\":\"SSMParameterWrite\"},{\"Action\":\"tag:GetResources\",\"Effect\":\"Allow\",\"Resource\":\"*\",\"Sid\":\"TagsRead\"}]}",
            "role": "sra-management-account-parameters-lambda"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.my_module.module.mangement_account_parameters.aws_iam_role.management_account_parameters_lambda_role",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.assume_role",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.management_account_parameters_lambda_ssm_policy"
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.mangement_account_parameters",
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "management_account_parameters",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architectures": [
              "arm64"
            ],
            "arn": "arn:aws:lambda:us-east-2:838265863270:function:sra-management-account-parameters",
            "code_sha256": "RRwemzhT/m9fdm9Kw01BqyGAdDF8phqLPdJd6WKU+MM=",
            "code_signing_config_arn": "",
            "dead_letter_config": [],
            "description": "",
            "environment": [
              {
                "variables": {
                  "CONTROL_TOWER": "false",
                  "LOG_LEVEL": "INFO",
                  "OTHER_LOG_ARCHIVE_ACCT": "234971855308",
                  "OTHER_REGIONS": "us-east-1,us-east-2",
                  "OTHER_SECURITY_ACCT": "138941876282",
                  "TAG_KEY": "sra-solution",
                  "TAG_VALUE": "sra-common-prerequisites"
                }
              }
            ],
            "ephemeral_storage": [
              {
                "size": 512
              }
            ],
            "file_system_config": [],
            "filename": "modules/aws-security-reference-architecture-examples/aws_sra_examples/terraform/common/ssm_parameters/lambda/lambda_function.zip",
            "function_name": "sra-management-account-parameters",
            "handler": "app.terraform_handler",
            "id": "sra-management-account-parameters",
            "image_config": [],
            "image_uri": "",
            "invoke_arn": "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-2:838265863270:function:sra-management-account-parameters/invocations",
            "kms_key_arn": "",
            "last_modified": "2024-08-01T21:48:29.129+0000",
            "layers": null,
            "logging_config": [
              {
                "application_log_level": "",
                "log_format": "Text",
                "log_group": "/aws/lambda/sra-management-account-parameters",
                "system_log_level": ""
              }
            ],
            "memory_size": 128,
            "package_type": "Zip",
            "publish": false,
            "qualified_arn": "arn:aws:lambda:us-east-2:838265863270:function:sra-management-account-parameters:$LATEST",
            "qualified_invoke_arn": "arn:aws:apigateway:us-east-2:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-2:838265863270:function:sra-management-account-parameters:$LATEST/invocations",
            "replace_security_groups_on_destroy": null,
            "replacement_security_group_ids": null,
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::838265863270:role/sra-management-account-parameters-lambda",
            "runtime": "python3.9",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "signing_job_arn": "",
            "signing_profile_version_arn": "",
            "skip_destroy": false,
            "snap_start": [],
            "source_code_hash": "RRwemzhT/m9fdm9Kw01BqyGAdDF8phqLPdJd6WKU+MM=",
            "source_code_size": 34835,
            "tags": {
              "sra-solution": "sra-common-prerequisites"
            },
            "tags_all": {
              "sra-solution": "sra-common-prerequisites"
            },
            "timeout": 300,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.my_module.module.mangement_account_parameters.aws_iam_role.management_account_parameters_lambda_role",
            "module.my_module.module.mangement_account_parameters.data.archive_file.hash_check",
            "module.my_module.module.mangement_account_parameters.data.archive_file.zipped_lambda",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.assume_role",
            "module.my_module.module.mangement_account_parameters.null_resource.package_lambda"
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.mangement_account_parameters",
      "mode": "managed",
      "type": "aws_lambda_invocation",
      "name": "lambda_invoke",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "function_name": "sra-management-account-parameters",
            "id": "sra-management-account-parameters_$LATEST_ff3add4c2c11d0f6b1696ffaadda95c4",
            "input": "{\"ResourceProperties\":{\"Action\":\"Created\",\"CONTROL_TOWER\":\"false\",\"OTHER_LOG_ARCHIVE_ACCT\":\"234971855308\",\"OTHER_REGIONS\":\"us-east-1,us-east-2\",\"OTHER_SECURITY_ACCT\":\"138941876282\",\"ServiceToken\":\"arn:aws:lambda:us-east-2:838265863270:function:sra-management-account-parameters\",\"TAG_KEY\":\"sra-solution\",\"TAG_VALUE\":\"sra-common-prerequisites\"},\"ResourceType\":\"Custom::LambdaCustomResource\"}",
            "lifecycle_scope": "CREATE_ONLY",
            "qualifier": "$LATEST",
            "result": "{\"event\": {\"ResourceProperties\": {\"Action\": \"Created\", \"CONTROL_TOWER\": \"false\", \"OTHER_LOG_ARCHIVE_ACCT\": \"234971855308\", \"OTHER_REGIONS\": \"us-east-1,us-east-2\", \"OTHER_SECURITY_ACCT\": \"138941876282\", \"ServiceToken\": \"arn:aws:lambda:us-east-2:838265863270:function:sra-management-account-parameters\", \"TAG_KEY\": \"sra-solution\", \"TAG_VALUE\": \"sra-common-prerequisites\"}, \"ResourceType\": \"Custom::LambdaCustomResource\"}, \"statusCode\": 200}",
            "terraform_key": "tf",
            "triggers": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.my_module.module.mangement_account_parameters.aws_iam_role.management_account_parameters_lambda_role",
            "module.my_module.module.mangement_account_parameters.aws_lambda_function.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.data.archive_file.hash_check",
            "module.my_module.module.mangement_account_parameters.data.archive_file.zipped_lambda",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.assume_role",
            "module.my_module.module.mangement_account_parameters.null_resource.package_lambda"
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.mangement_account_parameters",
      "mode": "managed",
      "type": "null_resource",
      "name": "package_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/null\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4350450490134780945",
            "triggers": {
              "src_hash": "9af59ef2f4bcbf55dee6225e63db0a43fddb272c"
            }
          },
          "sensitive_attributes": [],
          "dependencies": [
            "module.my_module.module.mangement_account_parameters.data.archive_file.hash_check"
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.s3_state_bucket",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "838265863270",
            "arn": "arn:aws:sts::838265863270:assumed-role/Admin/vinjak-Isengard",
            "id": "838265863270",
            "user_id": "AROA4GLEJ7RTH73FIVJOJ:vinjak-Isengard"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.s3_state_bucket",
      "mode": "data",
      "type": "aws_partition",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "dns_suffix": "amazonaws.com",
            "id": "aws",
            "partition": "aws",
            "reverse_dns_prefix": "com.amazonaws"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.s3_state_bucket",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "US East (Ohio)",
            "endpoint": "ec2.us-east-2.amazonaws.com",
            "id": "us-east-2",
            "name": "us-east-2"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.s3_state_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket",
      "name": "sra_state_bucket",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "acceleration_status": "",
            "acl": null,
            "arn": "arn:aws:s3:::sra-tfstate-files-us-east-2-838265863270",
            "bucket": "sra-tfstate-files-us-east-2-838265863270",
            "bucket_domain_name": "sra-tfstate-files-us-east-2-838265863270.s3.amazonaws.com",
            "bucket_prefix": "",
            "bucket_regional_domain_name": "sra-tfstate-files-us-east-2-838265863270.s3.us-east-2.amazonaws.com",
            "cors_rule": [],
            "force_destroy": true,
            "grant": [
              {
                "id": "bf42ccb836994639c72bce0ecc4075315d9db3763d801fdab42bd94b96854628",
                "permissions": [
                  "FULL_CONTROL"
                ],
                "type": "CanonicalUser",
                "uri": ""
              }
            ],
            "hosted_zone_id": "Z2O1EMRO9K5GLX",
            "id": "sra-tfstate-files-us-east-2-838265863270",
            "lifecycle_rule": [],
            "logging": [],
            "object_lock_configuration": [],
            "object_lock_enabled": false,
            "policy": "",
            "region": "us-east-2",
            "replication_configuration": [],
            "request_payer": "BucketOwner",
            "server_side_encryption_configuration": [
              {
                "rule": [
                  {
                    "apply_server_side_encryption_by_default": [
                      {
                        "kms_master_key_id": "",
                        "sse_algorithm": "AES256"
                      }
                    ],
                    "bucket_key_enabled": false
                  }
                ]
              }
            ],
            "tags": {
              "sra-solution": "sra-tfstate-s3"
            },
            "tags_all": {
              "sra-solution": "sra-tfstate-s3"
            },
            "timeouts": null,
            "versioning": [
              {
                "enabled": false,
                "mfa_delete": false
              }
            ],
            "website": [],
            "website_domain": null,
            "website_endpoint": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjM2MDAwMDAwMDAwMDAsInJlYWQiOjEyMDAwMDAwMDAwMDAsInVwZGF0ZSI6MTIwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.my_module.module.s3_state_bucket.data.aws_caller_identity.current",
            "module.my_module.module.s3_state_bucket.data.aws_region.current"
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.s3_state_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket_ownership_controls",
      "name": "sra_state_bucket_ownership_control",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "sra-tfstate-files-us-east-2-838265863270",
            "id": "sra-tfstate-files-us-east-2-838265863270",
            "rule": [
              {
                "object_ownership": "BucketOwnerPreferred"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.my_module.module.s3_state_bucket.aws_s3_bucket.sra_state_bucket",
            "module.my_module.module.s3_state_bucket.data.aws_caller_identity.current",
            "module.my_module.module.s3_state_bucket.data.aws_region.current"
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.s3_state_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket_public_access_block",
      "name": "sra_state_bucket_public_access_block",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "block_public_acls": true,
            "block_public_policy": true,
            "bucket": "sra-tfstate-files-us-east-2-838265863270",
            "id": "sra-tfstate-files-us-east-2-838265863270",
            "ignore_public_acls": true,
            "restrict_public_buckets": true
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.my_module.module.s3_state_bucket.aws_s3_bucket.sra_state_bucket",
            "module.my_module.module.s3_state_bucket.data.aws_caller_identity.current",
            "module.my_module.module.s3_state_bucket.data.aws_region.current"
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.s3_state_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket_server_side_encryption_configuration",
      "name": "sra_state_bucket_see",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "sra-tfstate-files-us-east-2-838265863270",
            "expected_bucket_owner": "",
            "id": "sra-tfstate-files-us-east-2-838265863270",
            "rule": [
              {
                "apply_server_side_encryption_by_default": [
                  {
                    "kms_master_key_id": "arn:aws:kms:us-east-2:838265863270:key/b5e95576-73c7-451c-8ac7-c99cfa3d6e77",
                    "sse_algorithm": "aws:kms"
                  }
                ],
                "bucket_key_enabled": null
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.my_module.data.aws_ssm_parameter.management_account_id",
            "module.my_module.data.aws_ssm_parameter.organization_id",
            "module.my_module.module.mangement_account_parameters.aws_cloudwatch_log_group.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_iam_role.management_account_parameters_lambda_role",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.cloudwatch_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.management_account_parameters_lambda_ssm_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_lambda_function.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_lambda_invocation.lambda_invoke",
            "module.my_module.module.mangement_account_parameters.data.archive_file.hash_check",
            "module.my_module.module.mangement_account_parameters.data.archive_file.zipped_lambda",
            "module.my_module.module.mangement_account_parameters.data.aws_caller_identity.current",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.assume_role",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.cloudwatch_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.management_account_parameters_lambda_ssm_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_partition.current",
            "module.my_module.module.mangement_account_parameters.data.aws_region.current",
            "module.my_module.module.mangement_account_parameters.null_resource.package_lambda",
            "module.my_module.module.s3_state_bucket.aws_s3_bucket.sra_state_bucket",
            "module.my_module.module.s3_state_bucket.data.aws_caller_identity.current",
            "module.my_module.module.s3_state_bucket.data.aws_region.current",
            "module.my_module.module.sra_secrets_kms.aws_kms_key.sra_secrets_key",
            "module.my_module.module.sra_secrets_kms.data.aws_caller_identity.current",
            "module.my_module.module.sra_secrets_kms.data.aws_iam_policy_document.sra_secrets_key_policy",
            "module.my_module.module.sra_secrets_kms.data.aws_partition.current",
            "module.my_module.module.sra_secrets_kms.data.aws_region.current"
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.s3_state_bucket",
      "mode": "managed",
      "type": "aws_s3_bucket_versioning",
      "name": "sra_state_bucket_versioning",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "bucket": "sra-tfstate-files-us-east-2-838265863270",
            "expected_bucket_owner": "",
            "id": "sra-tfstate-files-us-east-2-838265863270",
            "mfa": null,
            "versioning_configuration": [
              {
                "mfa_delete": "",
                "status": "Enabled"
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.my_module.module.s3_state_bucket.aws_s3_bucket.sra_state_bucket",
            "module.my_module.module.s3_state_bucket.data.aws_caller_identity.current",
            "module.my_module.module.s3_state_bucket.data.aws_region.current"
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.sra_execution_role",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "838265863270",
            "arn": "arn:aws:sts::838265863270:assumed-role/Admin/vinjak-Isengard",
            "id": "838265863270",
            "user_id": "AROA4GLEJ7RTH73FIVJOJ:vinjak-Isengard"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.sra_execution_role",
      "mode": "data",
      "type": "aws_partition",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "dns_suffix": "amazonaws.com",
            "id": "aws",
            "partition": "aws",
            "reverse_dns_prefix": "com.amazonaws"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.sra_execution_role",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "sra_execution_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::838265863270:role/sra-execution",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::838265863270:root\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2024-08-01T21:49:46Z",
            "description": "",
            "force_detach_policies": false,
            "id": "sra-execution",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::aws:policy/AdministratorAccess"
            ],
            "max_session_duration": 3600,
            "name": "sra-execution",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {
              "sra-solution": "sra-create-deployment-roles"
            },
            "tags_all": {
              "sra-solution": "sra-create-deployment-roles"
            },
            "unique_id": "AROA4GLEJ7RTIT4P66RJ2"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "assume_role_policy"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "module.my_module.data.aws_ssm_parameter.management_account_id",
            "module.my_module.module.mangement_account_parameters.aws_cloudwatch_log_group.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_iam_role.management_account_parameters_lambda_role",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.cloudwatch_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.management_account_parameters_lambda_ssm_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_lambda_function.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_lambda_invocation.lambda_invoke",
            "module.my_module.module.mangement_account_parameters.data.archive_file.hash_check",
            "module.my_module.module.mangement_account_parameters.data.archive_file.zipped_lambda",
            "module.my_module.module.mangement_account_parameters.data.aws_caller_identity.current",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.assume_role",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.cloudwatch_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.management_account_parameters_lambda_ssm_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_partition.current",
            "module.my_module.module.mangement_account_parameters.data.aws_region.current",
            "module.my_module.module.mangement_account_parameters.null_resource.package_lambda"
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.sra_secrets_kms",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "838265863270",
            "arn": "arn:aws:sts::838265863270:assumed-role/Admin/vinjak-Isengard",
            "id": "838265863270",
            "user_id": "AROA4GLEJ7RTH73FIVJOJ:vinjak-Isengard"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.sra_secrets_kms",
      "mode": "data",
      "type": "aws_iam_policy_document",
      "name": "sra_secrets_key_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "4064378047",
            "json": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Enable IAM User Permissions\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::838265863270:root\"\n      }\n    },\n    {\n      \"Sid\": \"Allow access through AWS Secrets Manager for all principals in the account that are authorized to use AWS Secrets Manager\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt\",\n        \"kms:DescribeKey\",\n        \"kms:Decrypt\",\n        \"kms:CreateGrant\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"*\"\n      },\n      \"Condition\": {\n        \"StringEquals\": {\n          \"aws:PrincipalOrgId\": \"o-4ngkm7vxuw\",\n          \"kms:ViaService\": \"secretsmanager.us-east-2.amazonaws.com\"\n        },\n        \"StringLike\": {\n          \"aws:PrincipalArn\": \"arn:aws:iam::*:role/AWSControlTowerExecution\",\n          \"kms:EncryptionContext:SecretARN\": \"arn:aws:secretsmanager:us-east-2:*:secret:sra/*\"\n        }\n      }\n    },\n    {\n      \"Sid\": \"Allow direct access to key metadata\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:List*\",\n        \"kms:Get*\",\n        \"kms:Describe*\",\n        \"kms:Decrypt\"\n      ],\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::838265863270:root\"\n      }\n    },\n    {\n      \"Sid\": \"Allow alias creation during setup\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:CreateAlias\",\n      \"Resource\": \"*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::838265863270:root\"\n      },\n      \"Condition\": {\n        \"StringEquals\": {\n          \"kms:CallerAccount\": \"838265863270\",\n          \"kms:ViaService\": \"cloudformation.us-east-2.amazonaws.com\"\n        }\n      }\n    }\n  ]\n}",
            "minified_json": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"Enable IAM User Permissions\",\"Effect\":\"Allow\",\"Action\":\"kms:*\",\"Resource\":\"*\",\"Principal\":{\"AWS\":\"arn:aws:iam::838265863270:root\"}},{\"Sid\":\"Allow access through AWS Secrets Manager for all principals in the account that are authorized to use AWS Secrets Manager\",\"Effect\":\"Allow\",\"Action\":[\"kms:ReEncrypt*\",\"kms:GenerateDataKey*\",\"kms:Encrypt\",\"kms:DescribeKey\",\"kms:Decrypt\",\"kms:CreateGrant\"],\"Resource\":\"*\",\"Principal\":{\"AWS\":\"*\"},\"Condition\":{\"StringEquals\":{\"aws:PrincipalOrgId\":\"o-4ngkm7vxuw\",\"kms:ViaService\":\"secretsmanager.us-east-2.amazonaws.com\"},\"StringLike\":{\"aws:PrincipalArn\":\"arn:aws:iam::*:role/AWSControlTowerExecution\",\"kms:EncryptionContext:SecretARN\":\"arn:aws:secretsmanager:us-east-2:*:secret:sra/*\"}}},{\"Sid\":\"Allow direct access to key metadata\",\"Effect\":\"Allow\",\"Action\":[\"kms:List*\",\"kms:Get*\",\"kms:Describe*\",\"kms:Decrypt\"],\"Resource\":\"*\",\"Principal\":{\"AWS\":\"arn:aws:iam::838265863270:root\"}},{\"Sid\":\"Allow alias creation during setup\",\"Effect\":\"Allow\",\"Action\":\"kms:CreateAlias\",\"Resource\":\"*\",\"Principal\":{\"AWS\":\"arn:aws:iam::838265863270:root\"},\"Condition\":{\"StringEquals\":{\"kms:CallerAccount\":\"838265863270\",\"kms:ViaService\":\"cloudformation.us-east-2.amazonaws.com\"}}}]}",
            "override_json": null,
            "override_policy_documents": null,
            "policy_id": null,
            "source_json": null,
            "source_policy_documents": null,
            "statement": [
              {
                "actions": [
                  "kms:*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::838265863270:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "*"
                ],
                "sid": "Enable IAM User Permissions"
              },
              {
                "actions": [
                  "kms:CreateGrant",
                  "kms:Decrypt",
                  "kms:DescribeKey",
                  "kms:Encrypt",
                  "kms:GenerateDataKey*",
                  "kms:ReEncrypt*"
                ],
                "condition": [
                  {
                    "test": "StringEquals",
                    "values": [
                      "o-4ngkm7vxuw"
                    ],
                    "variable": "aws:PrincipalOrgId"
                  },
                  {
                    "test": "StringEquals",
                    "values": [
                      "secretsmanager.us-east-2.amazonaws.com"
                    ],
                    "variable": "kms:ViaService"
                  },
                  {
                    "test": "StringLike",
                    "values": [
                      "arn:aws:iam::*:role/AWSControlTowerExecution"
                    ],
                    "variable": "aws:PrincipalArn"
                  },
                  {
                    "test": "StringLike",
                    "values": [
                      "arn:aws:secretsmanager:us-east-2:*:secret:sra/*"
                    ],
                    "variable": "kms:EncryptionContext:SecretARN"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "*"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "*"
                ],
                "sid": "Allow access through AWS Secrets Manager for all principals in the account that are authorized to use AWS Secrets Manager"
              },
              {
                "actions": [
                  "kms:Decrypt",
                  "kms:Describe*",
                  "kms:Get*",
                  "kms:List*"
                ],
                "condition": [],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::838265863270:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "*"
                ],
                "sid": "Allow direct access to key metadata"
              },
              {
                "actions": [
                  "kms:CreateAlias"
                ],
                "condition": [
                  {
                    "test": "StringEquals",
                    "values": [
                      "838265863270"
                    ],
                    "variable": "kms:CallerAccount"
                  },
                  {
                    "test": "StringEquals",
                    "values": [
                      "cloudformation.us-east-2.amazonaws.com"
                    ],
                    "variable": "kms:ViaService"
                  }
                ],
                "effect": "Allow",
                "not_actions": [],
                "not_principals": [],
                "not_resources": [],
                "principals": [
                  {
                    "identifiers": [
                      "arn:aws:iam::838265863270:root"
                    ],
                    "type": "AWS"
                  }
                ],
                "resources": [
                  "*"
                ],
                "sid": "Allow alias creation during setup"
              }
            ],
            "version": "2012-10-17"
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "statement"
              },
              {
                "type": "index",
                "value": {
                  "value": 1,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "condition"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "statement"
              },
              {
                "type": "index",
                "value": {
                  "value": 2,
                  "type": "number"
                }
              },
              {
                "type": "get_attr",
                "value": "principals"
              }
            ]
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.sra_secrets_kms",
      "mode": "data",
      "type": "aws_partition",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "dns_suffix": "amazonaws.com",
            "id": "aws",
            "partition": "aws",
            "reverse_dns_prefix": "com.amazonaws"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.sra_secrets_kms",
      "mode": "data",
      "type": "aws_region",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "description": "US East (Ohio)",
            "endpoint": "ec2.us-east-2.amazonaws.com",
            "id": "us-east-2",
            "name": "us-east-2"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.my_module.module.sra_secrets_kms",
      "mode": "managed",
      "type": "aws_kms_alias",
      "name": "sra_secrets_key_alias",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-2:838265863270:alias/sra-secrets-key",
            "id": "alias/sra-secrets-key",
            "name": "alias/sra-secrets-key",
            "name_prefix": "",
            "target_key_arn": "arn:aws:kms:us-east-2:838265863270:key/b5e95576-73c7-451c-8ac7-c99cfa3d6e77",
            "target_key_id": "b5e95576-73c7-451c-8ac7-c99cfa3d6e77"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.my_module.data.aws_ssm_parameter.management_account_id",
            "module.my_module.data.aws_ssm_parameter.organization_id",
            "module.my_module.module.mangement_account_parameters.aws_cloudwatch_log_group.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_iam_role.management_account_parameters_lambda_role",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.cloudwatch_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.management_account_parameters_lambda_ssm_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_lambda_function.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_lambda_invocation.lambda_invoke",
            "module.my_module.module.mangement_account_parameters.data.archive_file.hash_check",
            "module.my_module.module.mangement_account_parameters.data.archive_file.zipped_lambda",
            "module.my_module.module.mangement_account_parameters.data.aws_caller_identity.current",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.assume_role",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.cloudwatch_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.management_account_parameters_lambda_ssm_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_partition.current",
            "module.my_module.module.mangement_account_parameters.data.aws_region.current",
            "module.my_module.module.mangement_account_parameters.null_resource.package_lambda",
            "module.my_module.module.sra_secrets_kms.aws_kms_key.sra_secrets_key",
            "module.my_module.module.sra_secrets_kms.data.aws_caller_identity.current",
            "module.my_module.module.sra_secrets_kms.data.aws_iam_policy_document.sra_secrets_key_policy",
            "module.my_module.module.sra_secrets_kms.data.aws_partition.current",
            "module.my_module.module.sra_secrets_kms.data.aws_region.current"
          ]
        }
      ]
    },
    {
      "module": "module.my_module.module.sra_secrets_kms",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "sra_secrets_key",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-2:838265863270:key/b5e95576-73c7-451c-8ac7-c99cfa3d6e77",
            "bypass_policy_lockout_safety_check": false,
            "custom_key_store_id": "",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": null,
            "description": "SRA Secrets Key",
            "enable_key_rotation": true,
            "id": "b5e95576-73c7-451c-8ac7-c99cfa3d6e77",
            "is_enabled": true,
            "key_id": "b5e95576-73c7-451c-8ac7-c99cfa3d6e77",
            "key_usage": "ENCRYPT_DECRYPT",
            "multi_region": false,
            "policy": "{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::838265863270:root\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:ReEncrypt*\",\"kms:GenerateDataKey*\",\"kms:Encrypt\",\"kms:DescribeKey\",\"kms:Decrypt\",\"kms:CreateGrant\"],\"Condition\":{\"StringEquals\":{\"aws:PrincipalOrgId\":\"o-4ngkm7vxuw\",\"kms:ViaService\":\"secretsmanager.us-east-2.amazonaws.com\"},\"StringLike\":{\"aws:PrincipalArn\":\"arn:aws:iam::*:role/AWSControlTowerExecution\",\"kms:EncryptionContext:SecretARN\":\"arn:aws:secretsmanager:us-east-2:*:secret:sra/*\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Resource\":\"*\",\"Sid\":\"Allow access through AWS Secrets Manager for all principals in the account that are authorized to use AWS Secrets Manager\"},{\"Action\":[\"kms:List*\",\"kms:Get*\",\"kms:Describe*\",\"kms:Decrypt\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::838265863270:root\"},\"Resource\":\"*\",\"Sid\":\"Allow direct access to key metadata\"},{\"Action\":\"kms:CreateAlias\",\"Condition\":{\"StringEquals\":{\"kms:CallerAccount\":\"838265863270\",\"kms:ViaService\":\"cloudformation.us-east-2.amazonaws.com\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::838265863270:root\"},\"Resource\":\"*\",\"Sid\":\"Allow alias creation during setup\"}],\"Version\":\"2012-10-17\"}",
            "rotation_period_in_days": 365,
            "tags": null,
            "tags_all": {},
            "timeouts": null,
            "xks_key_id": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.my_module.data.aws_ssm_parameter.management_account_id",
            "module.my_module.data.aws_ssm_parameter.organization_id",
            "module.my_module.module.mangement_account_parameters.aws_cloudwatch_log_group.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_iam_role.management_account_parameters_lambda_role",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.cloudwatch_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_iam_role_policy.management_account_parameters_lambda_ssm_policy_attachment",
            "module.my_module.module.mangement_account_parameters.aws_lambda_function.management_account_parameters",
            "module.my_module.module.mangement_account_parameters.aws_lambda_invocation.lambda_invoke",
            "module.my_module.module.mangement_account_parameters.data.archive_file.hash_check",
            "module.my_module.module.mangement_account_parameters.data.archive_file.zipped_lambda",
            "module.my_module.module.mangement_account_parameters.data.aws_caller_identity.current",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.assume_role",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.cloudwatch_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_iam_policy_document.management_account_parameters_lambda_ssm_policy",
            "module.my_module.module.mangement_account_parameters.data.aws_partition.current",
            "module.my_module.module.mangement_account_parameters.data.aws_region.current",
            "module.my_module.module.mangement_account_parameters.null_resource.package_lambda",
            "module.my_module.module.sra_secrets_kms.data.aws_caller_identity.current",
            "module.my_module.module.sra_secrets_kms.data.aws_iam_policy_document.sra_secrets_key_policy",
            "module.my_module.module.sra_secrets_kms.data.aws_partition.current",
            "module.my_module.module.sra_secrets_kms.data.aws_region.current"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
